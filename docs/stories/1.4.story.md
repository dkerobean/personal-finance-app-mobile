# Status

Draft

---

# Story

**As a** user,
**I want** to manually add, view, edit, and delete my transactions,
**so that** I have an accurate record of my financial activity.

---

# Acceptance Criteria

1. An "Add Transaction" screen is accessible, for example, via a Floating Action Button.
2. The form includes fields for Amount, Type (Income/Expense), Category, Date, and an optional Note.
3. The Category field must be a dropdown populated from the user's list of categories.
4. A screen exists to view a list of all transactions, sortable by date.
5. Users can select a transaction from the list to view its details and have options to edit or delete it.

Source: `docs/prd/epic-1-foundation-manual-finance-tracking-v2.md#story-14-manual-transaction-management-crud`

---

# Tasks / Subtasks

- [ ] UI: Add Transaction (AC: 1, 2)
  - [ ] FAB on transactions list navigates to `app/(app)/transactions/create.tsx` [Source: `docs/architecture.md#Routing Architecture`]
  - [ ] Form fields: amount (numeric), type (segmented Income/Expense), category (dropdown), date picker, note (optional) [Source: `docs/architecture.md#Frontend Architecture`]
  - [ ] Submit calls backend API to create transaction; on success, navigate back and refresh list [Source: `docs/architecture.md#API Specification` → `/transactions`]

- [ ] UI: Transactions List & Detail (AC: 3, 4, 5)
  - [ ] `app/(app)/transactions/index.tsx` lists transactions, sortable by date (default desc) [Source: `docs/architecture.md#Frontend Architecture`]
  - [ ] Tap item → `.../transactions/[id].tsx` with details and actions: edit/delete
  - [ ] Edit → `.../transactions/edit/[id].tsx`, prefill and PATCH on save [Source: `docs/architecture.md#API Specification` → `/transactions/{id}`]
  - [ ] Delete → confirmation dialog; DELETE then refresh list [Source: `docs/architecture.md#API Specification` → `/transactions/{id}`]

- [ ] Data Layer & State
  - [ ] `src/services/api/transactions.ts`: list/create/update/delete [Source: `docs/architecture.md#Frontend Services Layer`]
  - [ ] `src/stores/transactionStore.ts`: holds transactions, sorting, selected id [Source: `docs/architecture.md#State Management Architecture`]
  - [ ] Ensure category dropdown uses `categoryStore` data from Story 1.3

- [ ] Error Handling & UX
  - [ ] Normalize API errors and show toasts [Source: `docs/architecture.md#Error Handling Strategy`]
  - [ ] Loading/empty states; optimistic updates optional

- [ ] Testing
  - [ ] Unit/component tests for create/edit forms and list sorting with Jest + RNTL [Source: `docs/architecture.md#Frontend Testing`]
  - [ ] Integration tests mocking Transactions API for happy/error paths [Source: `docs/architecture.md#Testing Strategy`]

---

# Dev Notes

## Data Models
- Transaction: fields include `amount`, `type: 'income' | 'expense'`, `category_id`, `transaction_date`, optional `description` (note), plus ids [Source: `docs/architecture.md#Data Models` → Transactions]

## API Specifications
- Use REST `/transactions` endpoints per architecture for CRUD [Source: `docs/architecture.md#API Specification`]

## Component Specifications
- FAB on list; create/edit/detail screens; category dropdown bound to user's categories [Source: `docs/architecture.md#Frontend Architecture`]

## File Locations
- Screens under `app/(app)/transactions/*`
- Services: `src/services/api/transactions.ts`
- State: `src/stores/transactionStore.ts` [Source: `docs/architecture.md#Frontend Services Layer`, `#State Management Architecture`]

## Testing Requirements
- Co-located tests; cover sorting by date and CRUD flows; integration mocking API [Source: `docs/architecture.md#Frontend Testing`, `#Testing Strategy`]

## Technical Constraints
- TypeScript; React Native (Expo); smooth UX; follow Unified Project Structure [Source: `docs/architecture.md#Tech Stack`, `#Unified Project Structure`, `#Performance Optimization`]

---

# Change Log

| Date       | Version | Description                               | Author |
| ---------- | ------- | ----------------------------------------- | ------ |
| 2025-08-12 | 1.0     | Initial story draft created (SM)          | Bob    |

---

## Dev Agent Record

### Agent Model Used
{{agent_model_name_version}}

### Debug Log References

### Completion Notes List

### File List

---

## QA Results

Pending QA review.



